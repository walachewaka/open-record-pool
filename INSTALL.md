# Installation instructions - Open Record Pool
## Deployment
We use Docker Compose to launch all the services:

```
docker-compose up -d --build
```

## Configuration
You can override any setting by creating a file called docker-compose.override.yml at the root of the project.
(this directory)
Simply copy this example file and modify it:

```
cp docker-compose.override.example.yml docker-compose.override.yml
edit docker-compose.override.yml
```

Make sure to set up the path to your music in the docker-compose.override.yml file.

## Apply the database migrations:
You need to run this at least once, so that the backend service works properly.
This will create the database tables and insert any data we need to get started.

```sh
$ docker-compose exec backend aerich upgrade
```

Note that the migration scripts are generated by Aerich and should not be edited by hand.
There is a string at the top of the SQL file that says "-- migrate --", and it should
be left unchanged.

## How to reset the database
We use some SQL migration scripts to manage the contents of the database.
Sometimes you might want to reset the database to factory defaults.
To do so, run this command:

```
docker-compose down --volumes
```

You might want to run the database migrations again.

## Port numbers
Visit [http://localhost:5000](http://localhost:5000), [http://localhost:5000/docs](http://localhost:5000/docs), and [http://localhost:8080](http://localhost:8080) to make sure it works as expected.

## Developer notes
For the developer notes, see CONTRIBUTING.md.

